#!/bin/sh
the_path=$(dirname $(realpath $0))
. $the_path/start_sprawl
re_int='^[0-9]+$'
cmd_start=
opt_epmd_port=
case $1 in
  start)
    cmd_start=yes
    ;;
  *)
    ;;
esac
for i in $(seq 2 $#); do
  eval term=\$$i
  next_term=
  if [ $i -lt $# ]; then
    eval next_term=\$$(($i+1))
  fi
  case $term in
    --epmd-port)
      if [ -n "$next_term" ] \
      && [ -n "$(echo $next_term | grep -E $re_int)" ] ; then
        opt_epmd_port=$next_term
      fi
      ;;
    *)
      ;;
  esac
done
if [ -n "$cmd_start" ]; then
    echo start ... yes
    if [ -z "$opt_epmd_port" ]; then
        echo --epmd-port not speficied
        exit
    else
        echo --epmd-port ... yes \($opt_epmd_port\)
        start_sprawl $opt_epmd_port
    fi
fi
echo impl needed
exit
